<!doctype html>
<html lang="en">
<head>
    {% load static %}
    <title>{% block title %}Battle System Beta{% endblock %}</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link
            rel="stylesheet"
            type="text/css"
            href="{% static 'PseudomonGo/css/bootstrap.css' %}"
    />
</head>

<body>
<h1 class="text-center mb-5">Battle Demo: Player {{ player }}</h1>
<div class="container">
    <div class="row">
        <div class="col-sm text-center">
            <label for="animal">Pick</label>
            <select id="animal-dropdown" onchange="animal();">
                <option disabled selected value> -- select an animal --</option>
                {% for a in animals %}
                    <option value="{{ a.id }}">{{ a.animal_name }}</option>
                {% endfor %}
            </select>
            <h2>Animal</h2>
            <div class="card" style="width: 18rem;">
                <img src="..." id="animal-photo" alt="..." class="cart-img-top">
                <div class="card-body">
                    <h5 class="card-title"><span id="animal-picked"></span></h5>
                    <div class="progress">
                        <div id="theprogressbar"
                             class="progress-bar progress-bar-animated"
                             role="progressbar"
                             aria-valuenow="75"
                             aria-valuemin="0"
                             aria-valuemax="100"
                             style="width: 100%"></div>
                    </div>
                    <p class="card-text">Health: <span id="animal-hp-max" class="text-success"></span></p>
                    <div class="container">
                        <div class="row">
                            <button type="button" onclick="battle(0)" class="btn btn-primary btn-lg"><span
                                    id="move1" class="text"></span></button>
                            <button type="button" onclick="battle(1)" class="btn btn-primary btn-lg"><span
                                    id="move2" class="text"></span></button>
                            <button type="button" onclick="battle(2)" class="btn btn-primary btn-lg"><span
                                    id="move3" class="text"></span></button>
                            <button type="button" onclick="battle(3)" class="btn btn-primary btn-lg"><span
                                    id="move4" class="text"></span></button>
                        </div>
                    </div>
                </div>
            </div>
            <button type="button" onclick="battle(4)" class="btn btn-primary">Item</button>
            <button type="button" onclick="battle(5)" class="btn btn-danger">Run</button>
        </div>
        <div class="col-sm text-center border border-primary" style="height: 20rem;">Animations here...</div>

        <div class="col-sm text-center">
            <label for="robot">Pick</label>
            <select id="robot-dropdown" onchange="robot();" disabled>
                <option disabled selected value> -- select a robot --</option>
                {% for r in robots %}
                    <option value="{{ r.id }}">{{ r.entity_name }}</option>
                {% endfor %}
            </select>
            <h2>Robot</h2>
            <div class="card" style="width: 18rem;">
                <img src="..." id="robot-photo" alt="..." class="cart-img-top">
                <div class="card-body">
                    <h5 class="card-title"><span id="robot-picked"></span></h5>
                    <div class="progress">
                        <div id="theprogressbar"
                             class="progress-bar progress-bar-animated"
                             role="progressbar"
                             aria-valuenow="75"
                             aria-valuemin="0"
                             aria-valuemax="100"
                             style="width: 100%"></div>
                    </div>
                    <p class="card-text">Health: <span id="robot-hp" class="text-danger"></span></p>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="container text-center mt-5">
    <h2>Battle log: <span id="status" class="text-danger">just started</span></h2>
    <h2 id="winner" class="text-success"></h2>
</div>
<div class="text-center mt-5 ml-5 mr-5 border border-warning">
    <p>
        ðŸ’¡How it worksðŸ’¡: Battle demo is getting JavaScript from /static/ and getting animal data via our
        (api/animals/pk) every time the option changes in the dropdown
        -- same with robots (api/robots/pk).
    </p>
    <p><strong>TODO</strong> After match ends, HTTP PUT needs to occur to send data to app server about player/animal
        stats post Robot match. Also implement <strong>DEFEND</strong>, etc...</p>
</div>
{{ moves.dict|json_script:"moves" }}
<script src="{% static 'PseudomonGo/battle.js' %}"></script>
</body>
</html>